version: '3'
services:
  redis:
    image: "redis:latest"
    ports:
      - "6379:6379"
    networks:
      - fastapi_redis_network

  fastapi_app:
    build:
      context: .
    ports:
      - "8000:8000"
    depends_on:
      - redis
    networks:
      - fastapi_redis_network
    environment:
      - DOCKER_CONTAINER_IP=172.19.0.2 # The IP Address of the redis image inside the container

  redisinsight:
    # Using it to visualise the data
    image: "redislabs/redisinsight:latest"
    ports:
      - "8001:8001"
    networks:
      - fastapi_redis_network
    depends_on:
      - redis

networks:
  fastapi_redis_network:
    driver: bridge
